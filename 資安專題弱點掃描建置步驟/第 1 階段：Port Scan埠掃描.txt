é€šå¸¸å¼±é»æƒæä¸æœƒåªæƒ 22, 80, 443, 3306, 6379
- ä½†æœƒæƒä¸€å¤§çµ„å¸¸è¦‹ portï¼ˆä¾‹å¦‚ 100â€“500 å€‹ï¼‰
ä¾‹å¦‚ï¼š
ğŸ”¹ Nmap çš„é è¨­æƒæ
- æƒæ æœ€å¸¸è¦‹çš„ 1000 å€‹ portï¼ˆnmap-servicesï¼‰
ğŸ”¹ Nessus / OpenVAS
- æƒæ æ‰€æœ‰å¸¸è¦‹æœå‹™ port
- ä¹Ÿæœƒæƒä¸€äº›é«˜é¢¨éšª portï¼ˆå¦‚ 5900ã€11211ã€27017ï¼‰
ğŸ”¹ å•†ç”¨å¼±æƒå·¥å…·
- é€šå¸¸æƒ 1â€“65535 å…¨éƒ¨ port
- æˆ–è‡³å°‘æƒ 1â€“1024 + å¸¸è¦‹é«˜ä½ port

ä½†æ˜¯å› ç‚ºæˆ‘å€‘åªæ˜¯è¦åšä¸€å€‹æœ€å°MVPæ‰€ä»¥åªæƒé€™äº”å€‹PORTè™Ÿ


ğŸ” 1.1 æ±ºå®šæƒæç¯„åœï¼ˆDefine Scan Targetsï¼‰
1.1.1 æ±ºå®šç›®æ¨™ IP / Host
- æ¥å—ä½¿ç”¨è€…è¼¸å…¥ï¼ˆä¾‹å¦‚ python scanner.py 192.168.1.10ï¼‰
- æˆ–å¾è¨­å®šæª”è®€å–
- æ”¯æ´ domain â†’ IP è§£æï¼ˆç”¨ socket.gethostbyname()ï¼‰

def get_ports_to_scan(ports):
    return sorted(set(ports))

1.1.2 æ±ºå®š port ç¯„åœ
å¯ä»¥æ”¯æ´ä¸‰ç¨®æ¨¡å¼ï¼š
é è¨­å¸¸è¦‹ port 1â€“1024ï¼ˆç³»çµ±æœå‹™å¸¸è¦‹ï¼‰
è‡ªè¨‚åˆ—è¡¨ ä¾‹å¦‚ [22, 80, 443, 3306, 6379]
è‡ªè¨‚ç¯„åœ ä¾‹å¦‚10000-20000

1.1.3 è¼¸å…¥é©—è­‰
- port å¿…é ˆåœ¨ 1â€“65535
- åˆ—è¡¨ä¸èƒ½é‡è¤‡
- ç¯„åœä¸èƒ½åå‘ï¼ˆä¾‹å¦‚ 2000â€“1000ï¼‰

1.1.4 ç”¢ç”Ÿæœ€çµ‚æƒæåˆ—è¡¨
ä¾‹å¦‚ï¼š
	python:
		ports_to_scan = sorted(set(ports))

ğŸ”Œ 1.2 ä½¿ç”¨ TCP Connect Scanï¼ˆsocket.connect_exï¼‰

1.2~1.3
def scan_port(target_ip, port, timeout=0.5):
    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    sock.settimeout(timeout)

    try:
        result = sock.connect_ex((target_ip, port))
        if result == 0:
            return (port, "open")
        else:
            return (port, "closed")
    except Exception:
        return (port, "closed")
    finally:
        sock.close()

1.2.1 å»ºç«‹ socket
	python:
		sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

1.2.2 è¨­å®š timeoutï¼ˆä¸‹ä¸€æ­¥æœƒè¬›ï¼‰
	python:
		sock.settimeout(timeout)

1.2.3 å˜—è©¦é€£ç·š
	python:
		result = sock.connect_ex((target_ip, port))

1.2.4 åˆ¤æ–·çµæœ
	- 0 â†’ port é–‹å•Ÿ
	- å…¶ä»– â†’ port é—œé–‰æˆ–è¢«é˜²ç«ç‰†é˜»æ“‹

1.2.5 é—œé–‰ socket
	sock.close()

1.3.1 è¨­å®šåˆç† timeout
	- 0.3â€“1.0 ç§’éƒ½å¯
	- 0.5 ç§’æ˜¯å¸¸è¦‹æŠ˜è¡·ï¼ˆé€Ÿåº¦ vs æº–ç¢ºåº¦ï¼‰

1.3.2 ç‚ºä»€éº¼éœ€è¦ timeoutï¼Ÿ
	- é‡åˆ°é˜²ç«ç‰† DROP æ™‚ï¼Œconnect_ex æœƒå¡ä½
	- timeout è®“æƒæé€Ÿåº¦å¯æ§

1.3.3 å¯¦ä½œæ–¹å¼
	python:
		sock.settimeout(0.5)

1.3.4 éŒ¯èª¤è™•ç†
	- socket.timeout
	- ConnectionRefusedError
	- OSError




âš¡ 1.4 æ”¯æ´å¤šåŸ·è¡Œç·’ï¼ˆThreadPoolExecutorï¼‰

def port_scan(target_ip, ports, threads=100):
    ports_to_scan = get_ports_to_scan(ports)

    with ThreadPoolExecutor(max_workers=threads) as executor:
        results = executor.map(
            lambda p: scan_port(target_ip, p),
            ports_to_scan
        )

    open_ports = [port for port, status in results if status == "open"]
    return open_ports

1.4.1 ç‚ºä»€éº¼éœ€è¦å¤šåŸ·è¡Œç·’ï¼Ÿ
- å–®åŸ·è¡Œç·’æƒ 1â€“65535 æœƒå¾ˆæ…¢ï¼ˆ>30 ç§’ï¼‰
- ThreadPoolExecutor å¯æŠŠæ™‚é–“å£“åˆ° 1â€“3 ç§’

1.4.2 æ±ºå®š thread æ•¸é‡
å»ºè­°ï¼š
- 50 threadsï¼šç©©å®š
- 100 threadsï¼šå¿«é€Ÿ
- 300 threadsï¼šå¯èƒ½è¢« OS é™åˆ¶

1.4.3 å»ºç«‹ ThreadPoolExecutor
	python:
		from concurrent.futures import ThreadPoolExecutor

		with ThreadPoolExecutor(max_workers=100) as executor:
    			results = executor.map(scan_port, ports_to_scan)

1.4.4 scan_port å‡½å¼éœ€å…·å‚™ï¼š
- å»ºç«‹ socket
- è¨­ç½® timeout
- connect_ex
- å›å‚³çµæœï¼ˆé–‹å•Ÿ / é—œé–‰ï¼‰

1.4.5 æ”¶é›†çµæœ
	python:
		open_ports = [port for port, status in results if status == "open"]


ä¸»ç¨‹å¼å…¥å£
if __name__ == "__main__":
    target_ip = "127.0.0.1"
    ports = [22, 80, 443, 3306, 6379]

    open_ports = port_scan(target_ip, ports)
    print("[+] Open Ports:", open_ports)